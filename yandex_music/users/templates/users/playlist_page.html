{% extends 'base.html' %}

{% block title %}{{ playlist.title }} | {{ playlist.user.name }}{% endblock %}

{% block body %}
    <section class="display-4 mb-2">
        Playlist {{ playlist.title }}
        <a class="text-decoration-none" href="https://music.yandex.ru/users/{{ login }}/playlists/{{ playlist.id }}"
           target="_blank" style="vertical-align: text-bottom; display: inline-flex">
            <img class="align-self-center" src="/static/ya_music.png" style="width: 64px; height: 64px">
        </a>
        <a class="btn btn-outline-info" href="{{ url_for('users.playlist_artists', user_id=user_id, playlist_id=playlist.id) }}">Artists</a>
        <a class="btn btn-outline-info" href="{{ url_for('users.playlist_genres', user_id=user_id, playlist_id=playlist.id) }}">Genres</a>
        <a class="btn btn-outline-info" href="{{ url_for('users.playlist_years', user_id=user_id, playlist_id=playlist.id) }}">Years</a>
    </section>
    <section class="mb-2">
        {% if playlist.created %}
        <div class="badge badge-dark text-wrap p-2" style="font-size: 1em">
            Created
        </div>
        <div class="badge badge-success text-wrap p-2" style="font-size: 1em">
            {{ playlist.created }}
        </div>
        {% endif %}
        {% if playlist.modified %}
        <div class="badge badge-dark text-wrap p-2" style="font-size: 1em">
            Modified
        </div>
        <div class="badge badge-success text-wrap p-2" style="font-size: 1em">
            {{ playlist.modified }}
        </div>
        {% endif %}
        <div class="badge badge-dark text-wrap p-2" style="font-size: 1em">
            Duration
        </div>
        <div class="badge badge-success text-wrap p-2" style="font-size: 1em">
            {{ playlist.duration }}
        </div>
    </section>

    <table class="table table-hover" id="tracksTable">
        <thead>
        <tr>
            <th scope="col" style="width: 25%">Title</th>
            <th scope="col" style="width: 35%">Artists</th>
            <th scope="col" style="width: 10%">Year</th>
            <th scope="col" style="width: 20%">Genre</th>
            <th scope="col" style="width: 10%">Duration</th>
        </tr>
        </thead>
        <tbody>
        {% for track in playlist.tracks %}
        <tr>
            <td><a class="text-decoration-none" href="https://music.yandex.ru/track/{{ track.id }}" target="_blank">{{ track.title }}</a></td>
            <td>
                {% for artist in track.artists %}
                    <a class="text-decoration-none mr-2" href="{{ url_for('users.artist_page', user_id=playlist.user_id, artist_id=artist.id) }}">{{ artist.name }}</a>
                {% endfor %}
            </td>
            <td>
                {% if track.year %}
                    <a class="text-decoration-none" href="{{ url_for('users.year_tracks', user_id=playlist.user_id, playlist_id=playlist.id, year=track.year) }}">{{ track.year }}</a>
                {% endif %}
            </td>
            <td>
                {% if track.genre %}
                    <a class="text-decoration-none" href="{{ url_for('users.genre_tracks', user_id=playlist.user_id, playlist_id=playlist.id, genre=track.genre) }}">{{ track.genre }}</a>
                {% endif %}
            </td>
            <td>{{ track.duration }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <script>
        $(document).ready( function () {
            $('#tracksTable').DataTable( {
                "order": [[1, "asc"], [0, "asc"]]
            } );
        } );
    </script>
{% endblock %}